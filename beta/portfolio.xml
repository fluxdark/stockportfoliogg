<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="__MSG_gadgettitle__" description="Highly configurable list with unlimited number of stocks, options, ETFs. See chart and details for each stock. Calculate total value, earning and much more in your local currency." directory_title="Stock portfolio" scrolling="false" singleton="false" scaling="true" height="250" thumbnail="http://stockportfoliogg.googlecode.com/svn/released/images/StockPortfolioThumb.png" screenshot="http://stockportfoliogg.googlecode.com/svn/released/images/StockPortfolio.png" author="Christian Nybroe" author_email="cnybroe.feedback+Stockgadget@gmail.com" author_affiliation="Personal" author_location="Taasinge, Denmark" author_link="http://cnybroe.googlepages.com/" category="finance">
    <Locale messages="http://stockportfoliogg.googlecode.com/svn/released/locale/ALL_ALL.xml"/>
    <Locale lang="da" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/da_ALL.xml"/>
    <Locale lang="es" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/es_ALL.xml"/>
    <Locale lang="fr" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/fr_ALL.xml"/>
    <Locale lang="it" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/it_ALL.xml"/>
    <Locale lang="sv" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/sv_ALL.xml"/>
    <Locale lang="pt-PT" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/pt_PT.xml"/>
    <Locale lang="pt-BR" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/pt_BR.xml"/>
    <Locale lang="de" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/de_ALL.xml"/>
    <Locale lang="nl" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/nl_ALL.xml"/>
    <Locale lang="zh-TW" messages="http://stockportfoliogg.googlecode.com/svn/released/locale/zh_TW.xml"/>
    <Require feature="setprefs"/>
    <Require feature="minimessage"/>
    <Require feature="analytics"/>
    <Require feature="dynamic-height"/>
    <Require feature="settitle"/>
  </ModulePrefs>
  <UserPref name="GadgetVersion" datatype="hidden" default_value="0"/>
  <UserPref name="SettingVersion" datatype="hidden" default_value="0"/>
  <UserPref name="StockSymbols" datatype="hidden" default_value=""/>
  <UserPref name="StockQtys" datatype="hidden" default_value=""/>
  <UserPref name="StockPrices" datatype="hidden" default_value=""/>
  <UserPref name="StockTC" datatype="hidden" default_value=""/>
  <UserPref name="StockCurrRates" datatype="hidden" default_value=""/>
  <UserPref name="StockHi" datatype="hidden" default_value=""/>
  <UserPref name="StockLo" datatype="hidden" default_value=""/>
  <UserPref name="ShowProfit" datatype="hidden" default_value="Summary"/>
  <UserPref name="ChartType" datatype="hidden" default_value="ToolTip"/>
  <UserPref name="ShowNews" datatype="hidden" default_value="0"/>
  <UserPref name="CustomTitle" datatype="string" display_name="__MSG_customtitle__"  default_value="__MSG_gadgettitle__"/>
  <UserPref name="FontSize" display_name="__MSG_fontsize__" datatype="enum" default_value="11px"><EnumValue value="9px" display_value="9px"/><EnumValue value="10px" display_value="10px"/><EnumValue value="11px" display_value="11px"/><EnumValue value="12px" display_value="12px"/><EnumValue value="14px" display_value="14px"/></UserPref>
  <UserPref name="Currency" display_name="__MSG_currency__" datatype="enum" default_value="-"><EnumValue value="-" display_value="No currency conversion"/><EnumValue value="ARS" display_value="Argentine Peso (ARS)"/><EnumValue value="AUD" display_value="Australian Dollar (AUD)"/><EnumValue value="BRL" display_value="Brazilian Real (BRL)"/><EnumValue value="GBP" display_value="British Pound (GBP)"/><EnumValue value="CLP" display_value="Chilean Peso (CLP)"/><EnumValue value="CNY" display_value="Chinese Yuan (CNY)"/><EnumValue value="CZK" display_value="Czech Koruna (CZK)"/><EnumValue value="CAD" display_value="Canadian Dollar (CAD)"/><EnumValue value="DKK" display_value="Danish Krone (DKK)"/><EnumValue value="EEK" display_value="Estonian Kroon (EEK)"/><EnumValue value="EUR" display_value="Euro (EUR)"/><EnumValue value="HKD" display_value="Hong Kong Dollar (HKD)"/><EnumValue value="HUF" display_value="Hungarian Forint (HUF)"/><EnumValue value="ISK" display_value="Iceland Krona (ISK)"/><EnumValue value="INR" display_value="Indian Rupee (INR)"/><EnumValue value="IDR" display_value="Indonesian Rupiah (IDR)"/><EnumValue value="ILS" display_value="Israeli Shekel (ILS)"/><EnumValue value="JPY" display_value="Japanese Yen (JPY)"/><EnumValue value="KRW" display_value="Korean Won (KRW)"/><EnumValue value="KWD" display_value="Kuwaiti Dinar (KWD)"/><EnumValue value="MOP" display_value="Macau Pataca (MOP)"/><EnumValue value="MYR" display_value="Malaysian Ringgit (MYR)"/><EnumValue value="MXN" display_value="Mexican Peso (MXN)"/><EnumValue value="TRY" display_value="New Turkish Lira (TRY)"/><EnumValue value="NZD" display_value="New Zealand Dollar (NZD)"/><EnumValue value="NOK" display_value="Norwegian Krone (NOK)"/><EnumValue value="PHP" display_value="Philippine Peso (PHP)"/><EnumValue value="PLN" display_value="Polish Zloty (PLN)"/><EnumValue value="RON" display_value="Romanian New Leu (RON)"/><EnumValue value="RUB" display_value="Russian Rouble (RUB)"/><EnumValue value="SGD" display_value="Singapore Dollar (SGD)"/><EnumValue value="SEK" display_value="Swedish Krona (SEK)"/><EnumValue value="CHF" display_value="Swiss Franc (CHF)"/><EnumValue value="THB" display_value="Thai Baht (THB)"/><EnumValue value="USD" display_value="U.S. Dollar (USD)"/><EnumValue value="AED" display_value="UAE Dirham (AED)"/><EnumValue value="VEB" display_value="Venezuelan Bolivar (VEB)"/></UserPref>
  <UserPref name="NameColumn" display_name="__MSG_name__ __MSG_column__" datatype="enum" default_value="2"><EnumValue value="1" display_value="__MSG_symbol__"/><EnumValue value="2" display_value="__MSG_name__"/><EnumValue value="40" display_value="__MSG_name__(__MSG_symbol__)"/></UserPref>
  <UserPref name="ChangeColumn" display_name="__MSG_change__ __MSG_column__" datatype="enum" default_value="3"><EnumValue value="3" display_value="__MSG_changepercent__"/><EnumValue value="4" display_value="__MSG_change__"/><EnumValue value="5" display_value="__MSG_change__(%)"/></UserPref>
  <UserPref name="Column1" display_name="__MSG_column__ 1" datatype="enum" default_value="6"><EnumValue value="0" display_value="__MSG_notused__"/><EnumValue value="3" display_value="__MSG_changepercent__"/><EnumValue value="4" display_value="__MSG_change__"/><EnumValue value="5" display_value="__MSG_change__(%)"/><EnumValue value="6" display_value="__MSG_lasttrade__"/><EnumValue value="7" display_value="__MSG_lasttradedate__"/><EnumValue value="8" display_value="__MSG_lasttradetime__"/><EnumValue value="9" display_value="__MSG_dayopen__"/><EnumValue value="10" display_value="__MSG_daylow__"/><EnumValue value="11" display_value="__MSG_dayhigh__"/><EnumValue value="12" display_value="__MSG_dayvolume__"/><EnumValue value="13" display_value="__MSG_previousclose__"/><EnumValue value="14" display_value="__MSG_52weekrange__"/><EnumValue value="15" display_value="__MSG_ask__"/><EnumValue value="16" display_value="__MSG_bid__"/><EnumValue value="17" display_value="__MSG_tickertrend__"/><EnumValue value="18" display_value="__MSG_50daymovingavg__"/><EnumValue value="19" display_value="__MSG_200daymovingavg__"/><EnumValue value="20" display_value="__MSG_dayrange__"/><EnumValue value="24" display_value="__MSG_currency__"/><EnumValue value="26" display_value="__MSG_currencyrate__"/><EnumValue value="30" display_value="__MSG_dayearned__"/><EnumValue value="31" display_value="__MSG_earned__"/></UserPref>
  <UserPref name="Column2" display_name="__MSG_column__ 2" datatype="enum" default_value="31"><EnumValue value="0" display_value="__MSG_notused__"/><EnumValue value="6" display_value="__MSG_lasttrade__"/><EnumValue value="7" display_value="__MSG_lasttradedate__"/><EnumValue value="8" display_value="__MSG_lasttradetime__"/><EnumValue value="9" display_value="__MSG_dayopen__"/><EnumValue value="10" display_value="__MSG_daylow__"/><EnumValue value="11" display_value="__MSG_dayhigh__"/><EnumValue value="12" display_value="__MSG_dayvolume__"/><EnumValue value="13" display_value="__MSG_previousclose__"/><EnumValue value="14" display_value="__MSG_52weekrange__"/><EnumValue value="15" display_value="__MSG_ask__"/><EnumValue value="16" display_value="__MSG_bid__"/><EnumValue value="17" display_value="__MSG_tickertrend__"/><EnumValue value="18" display_value="__MSG_50daymovingavg__"/><EnumValue value="19" display_value="__MSG_200daymovingavg__"/><EnumValue value="20" display_value="__MSG_dayrange__"/><EnumValue value="24" display_value="__MSG_currency__"/><EnumValue value="26" display_value="__MSG_currencyrate__"/><EnumValue value="21" display_value="__MSG_optionstrike__"/><EnumValue value="22" display_value="__MSG_optioncallput__"/><EnumValue value="23" display_value="__MSG_optionexpire__"/><EnumValue value="30" display_value="__MSG_dayearned__"/><EnumValue value="31" display_value="__MSG_earned__"/></UserPref>
  <UserPref name="Column3" display_name="__MSG_column__ 3" datatype="enum" default_value="17"><EnumValue value="0" display_value="__MSG_notused__"/><EnumValue value="6" display_value="__MSG_lasttrade__"/><EnumValue value="7" display_value="__MSG_lasttradedate__"/><EnumValue value="8" display_value="__MSG_lasttradetime__"/><EnumValue value="9" display_value="__MSG_dayopen__"/><EnumValue value="10" display_value="__MSG_daylow__"/><EnumValue value="11" display_value="__MSG_dayhigh__"/><EnumValue value="12" display_value="__MSG_dayvolume__"/><EnumValue value="13" display_value="__MSG_previousclose__"/><EnumValue value="14" display_value="__MSG_52weekrange__"/><EnumValue value="15" display_value="__MSG_ask__"/><EnumValue value="16" display_value="__MSG_bid__"/><EnumValue value="17" display_value="__MSG_tickertrend__"/><EnumValue value="18" display_value="__MSG_50daymovingavg__"/><EnumValue value="19" display_value="__MSG_200daymovingavg__"/><EnumValue value="20" display_value="__MSG_dayrange__"/><EnumValue value="24" display_value="__MSG_currency__"/><EnumValue value="26" display_value="__MSG_currencyrate__"/><EnumValue value="21" display_value="__MSG_optionstrike__"/><EnumValue value="22" display_value="__MSG_optioncallput__"/><EnumValue value="23" display_value="__MSG_optionexpire__"/><EnumValue value="30" display_value="__MSG_dayearned__"/><EnumValue value="31" display_value="__MSG_earned__"/></UserPref>
  <UserPref name="Column4" display_name="__MSG_column__ 4" datatype="enum" default_value="0"><EnumValue value="0" display_value="__MSG_notused__"/><EnumValue value="6" display_value="__MSG_lasttrade__"/><EnumValue value="7" display_value="__MSG_lasttradedate__"/><EnumValue value="8" display_value="__MSG_lasttradetime__"/><EnumValue value="9" display_value="__MSG_dayopen__"/><EnumValue value="10" display_value="__MSG_daylow__"/><EnumValue value="11" display_value="__MSG_dayhigh__"/><EnumValue value="12" display_value="__MSG_dayvolume__"/><EnumValue value="13" display_value="__MSG_previousclose__"/><EnumValue value="14" display_value="__MSG_52weekrange__"/><EnumValue value="15" display_value="__MSG_ask__"/><EnumValue value="16" display_value="__MSG_bid__"/><EnumValue value="17" display_value="__MSG_tickertrend__"/><EnumValue value="18" display_value="__MSG_50daymovingavg__"/><EnumValue value="19" display_value="__MSG_200daymovingavg__"/><EnumValue value="20" display_value="__MSG_dayrange__"/><EnumValue value="24" display_value="__MSG_currency__"/><EnumValue value="26" display_value="__MSG_currencyrate__"/><EnumValue value="21" display_value="__MSG_optionstrike__"/><EnumValue value="22" display_value="__MSG_optioncallput__"/><EnumValue value="23" display_value="__MSG_optionexpire__"/><EnumValue value="30" display_value="__MSG_dayearned__"/><EnumValue value="31" display_value="__MSG_earned__"/></UserPref>
  <UserPref name="Column5" display_name="__MSG_column__ 5" datatype="enum" default_value="0"><EnumValue value="0" display_value="__MSG_notused__"/><EnumValue value="6" display_value="__MSG_lasttrade__"/><EnumValue value="7" display_value="__MSG_lasttradedate__"/><EnumValue value="8" display_value="__MSG_lasttradetime__"/><EnumValue value="9" display_value="__MSG_dayopen__"/><EnumValue value="10" display_value="__MSG_daylow__"/><EnumValue value="11" display_value="__MSG_dayhigh__"/><EnumValue value="12" display_value="__MSG_dayvolume__"/><EnumValue value="13" display_value="__MSG_previousclose__"/><EnumValue value="14" display_value="__MSG_52weekrange__"/><EnumValue value="15" display_value="__MSG_ask__"/><EnumValue value="16" display_value="__MSG_bid__"/><EnumValue value="17" display_value="__MSG_tickertrend__"/><EnumValue value="18" display_value="__MSG_50daymovingavg__"/><EnumValue value="19" display_value="__MSG_200daymovingavg__"/><EnumValue value="20" display_value="__MSG_dayrange__"/><EnumValue value="21" display_value="__MSG_optionstrike__"/><EnumValue value="22" display_value="__MSG_optioncallput__"/><EnumValue value="23" display_value="__MSG_optionexpire__"/><EnumValue value="30" display_value="__MSG_dayearned__"/><EnumValue value="31" display_value="__MSG_earned__"/></UserPref>
  <UserPref name="ChartScope" display_name="__MSG_chartperiod__" datatype="enum" default_value="3m"><EnumValue value="1d" display_value="1 __MSG_day__"/><EnumValue value="5d" display_value="5 __MSG_days__"/><EnumValue value="1m" display_value="1 __MSG_month__"/><EnumValue value="3m" display_value="3 __MSG_months__"/><EnumValue value="1y" display_value="6 __MSG_months__"/></UserPref>
  <UserPref name="UpdateInterval" display_name="__MSG_updateinterval__" datatype="enum" default_value="300000"><EnumValue value="60000" display_value="1 __MSG_minute__"/><EnumValue value="300000" display_value="5 __MSG_minute__"/><EnumValue value="600000" display_value="10 __MSG_minute__"/></UserPref>
  <UserPref name="Flashing" display_name="__MSG_flashing__" default_value="true" datatype="bool"/>
<Content type="html" view="home,canvas">
  <![CDATA[
  <style type="text/css">
    .cellL{padding-right:2px;padding-left:2px;white-space:nowrap;text-align:left;}
    .cellC{padding-right:2px;padding-left:2px;white-space:nowrap;text-align:center;}
    .cellR{padding-right:2px;padding-left:2px;white-space:nowrap;text-align:right;}
    .def{font-family:sans-serif;}
    .loading{font-family:sans-serif;foreground:#666666;font-style:italic;font-size:11px;}
    .Footer{font-size:9px;font-family:sans-serif;padding:0px;margin:0px;}
    .Chart{display:none;filter:alpha(opacity=85);opacity:0.85;background-color:#FFFFFF;width:192;height:96;position:absolute;color:white;border:2px solid black;z-index:9999;}
    .SearchList{display:none;position:relative;border:1px solid black;z-index:9998;background-color:white;top:-1;}
    .HrDef{height:1px;margin-top:1px;margin-bottom:1px;margin-right:0px;margin-left:0px;}
    td.HiAlert{width:9px;background:url("http://stockportfoliogg.googlecode.com/svn/released/images/HiAlert9.gif");background-repeat:no-repeat;background-position:center;}
    td.LoAlert{width:9px;background:url("http://stockportfoliogg.googlecode.com/svn/released/images/LoAlert9.gif");background-repeat:no-repeat;background-position:center;}
	</style>
  <div id="StockData"><div class="loading">__MSG_initialloading__</div></div>
  <div id="Footer" class="Footer"></div>
  <div id="StockProfitDetails" style="display:none;width:100%;overflow:scroll;overflow-y:hidden;"></div>
  <div id="StockAdd" class="def" style="display:none;"></div>
  <div id="StockProfitSummary" class="def" style="display:none"></div>
  <div id="StockSummary" class="def" style="display:none;"><div class="loading">__MSG_loading__</div></div>
  <div id="StockNews" class="def" style="display:none;"></div>
  <div id="disclaimer" nowrap><hr class="HrDef"><table border=0 cellspacing=0 cellpadding=0><tr><td valign="middle" class="Footer"><a href="http://cnybroe.googlepages.com/disclaimer" target="_blank">Stock data, news and historical charts provided by </td><td><img width="16" height="16" border=0 alt="Yahoo" title="Yahoo" src="http://stockportfoliogg.googlecode.com/svn/released/images/Yahoo.gif"></td><td valign="middle" class="Footer"></a></td></tr></table></div>
  <div id="debug" nowrap style="display:none;font-size:9pt;padding:5px;color:red;width:100%;height:200px;overflow:scroll"></div> 
  <script language="javascript" type="text/javascript" defer="defer">
var pref=new _IG_Prefs(__MODULE_ID__),fsize=pref.getString("FontSize"),arrStockSymbols=[],arrStockQtys=[],arrStockPrices=[],arrStockTC=[],arrStockHi=[],arrStockLo=[],arrStocks=[],arrStockCurrRates=[],iVersion=1.21,iPrefVersion=0,bDataReady,bTablesReady,bAllReady,iMaxStockNo=40,iStockCols=5,iConfCols=0,iSDRetry=0,iTmrRetry,debug=0;function fnInit(){fnReadPrefs();fnLoad();setTimeout('_IG_Analytics("UA-2031644-1", "/Portfolio")',3e3);fnMessage()}function fnLoad(){print("fnLoad started");fnPrefsValidation(arrStockSymbols);fnLoadData();fnInsertTables();print("fnLoad ended")}function fnLoadData(){print("fnLoadData started");bDataReady=false;bAllReady=false;clearTimeout(iTmrRetry);iTmrRetry=setTimeout("fnRetry()",5e3);for(var d="e1snp2c1cl1d1t1oghvpwabt7m8m6ms3p3e3c4x",a="",b=0;b<arrStockSymbols.length;b++)a+=arrStockSymbols[b]+",";a=a.substr(0,a.length-1);var c="http://download.finance.yahoo.com/d/quotes.csv?s="+_esc(a)+"&f="+d+"&CW="+Math.random()*1e3;print("fnLoadData url:"+c);_IG_FetchContent(c,fnStockDataProxy,{refreshInterval:60});print("fnLoadData ended")}function fnStockDataProxy(d){print("fnStockDataProxy started");var b=[],c=[],a="";b=d.split("\r\n");for(i=0;i<b.length-1;i++){c=splitLine(b[i]);a+=trim(c[24])+pref.getString("Currency")+"=X+"}a=a.substr(0,a.length-1);var e="http://download.finance.yahoo.com/d/quotes.csv?s="+_esc(a)+"&f=l1&CW="+Math.random()*1e3;_IG_FetchContent(e,_IG_Callback(fnPrepareStockData,d),{refreshInterval:60});print("fnStockDataProxy ended")}function fnPrepareStockData(c,f){print("fnPrepareStockData started");var d=[],b=[],a=[];c=c.replace(/0.00/g,"1.00");arrStocks=[];d=c.split("\r\n");b=f.split("\r\n");if(b.length>1){for(i=0;i<b.length-1;i++){a=splitLine(b[i]);a[26]=d[i];a[30]=isNaN(a[4])?0:myRound(a[4]*arrStockQtys[i]*a[26]);if(isNaN(arrStockCurrRates[i])||trim(arrStockCurrRates[i])=="")arrStockCurrRates[i]=a[26];var e=parseInt(arrStockPrices[i]*arrStockCurrRates[i]*arrStockQtys[i])+parseInt(arrStockTC[i]);a[31]=myRound(a[6].replace("%","")*a[26]*arrStockQtys[i]-e);a[32]=isNaN(a[3].replace(/\%/g,"").replace(/\+/g,"").replace(/\-/g,""))?0:myRound(a[3].replace(/\%/g,""));a[34]=myRound(a[6].replace("%","")*arrStockQtys[i]*a[26]);a[33]=0;if(arrStockQtys[i]>0&&arrStockPrices[i]>0)a[33]=myRound((a[34]/e-1)*100);arrStocks[i]=a}bDataReady=true;fnUpdateValues()}print("fnPrepareStockData ended")}function fnRetry(){var a="FooterMsg";print("fnRetry started");clearTimeout(iTmrRetry);if(!bDataReady)if(iSDRetry<10){iSDRetry++;var b="("+iSDRetry+")";_gel(a).innerHTML="__MSG_retrystockloading__"+b;fnLoadData()}else _gel(a).innerHTML="Gave up loading stockdata";else{iTmrRetry=setTimeout("fnLoadData()",pref.getInt("UpdateInterval")-5e3);iSDRetry=0}print("fnRetry ended")}function fnUpdateValues(){print("fnUpdateValues started");bAllReady=bDataReady&&bTablesReady;print("fnUpdateValues bAllReady:"+bAllReady);if(bAllReady){fnUpdateStockTable();fnUpdateProfit();fnUpdateSummary(0);_gel("FooterMsg").innerHTML="__MSG_lastupdated__:"+fngetDate(false)}_IG_AdjustIFrameHeight();print("fnUpdateValues ended")}function fnUpdateProfit(){var b="</b>",a="<b>",h="#000000",g="ptc2",f="ptc1";print("fnUpdateProfit started");if(bAllReady){var c=0,d=0,e=0,l=_gel("StockProfitDetails").style.display=="block",m=_gel("StockProfitSummary").style.display=="block",j,k;for(i=0;i<arrStocks.length;i++){c+=arrStocks[i][30];d+=arrStocks[i][31];e+=arrStocks[i][34];if(l){_gel("ptc0"+i).innerHTML=arrStocks[i][2];_gel(f+i).innerHTML=arrStocks[i][30]+" ("+arrStocks[i][32]+"%)";_gel(g+i).innerHTML=arrStocks[i][31]+" ("+arrStocks[i][33]+"%)";_gel("ptc3"+i).innerHTML=arrStocks[i][34];_gel("ptc4"+i).innerHTML=arrStocks[i][24];_gel("ptc5"+i).innerHTML=arrStocks[i][26];_gel(f+i).style.color=fnNumToColor(arrStocks[i][32],h);_gel(g+i).style.color=fnNumToColor(arrStocks[i][31],h)}}j=fnNumToColor(c,h);k=fnNumToColor(d,h);c=myRound(c);d=myRound(d);e=myRound(e);if(l){_gel(f+i).style.color=j;_gel(f+i).innerHTML=a+c+b;_gel(g+i).style.color=k;_gel(g+i).innerHTML=a+d+b;_gel("ptc3"+i).innerHTML=a+e+b;var n="("+pref.getString("Currency")+")";_gel("ptc0"+i).innerHTML='<div title="__MSG_currencytip__"><b>__MSG_total__'+n+"</b></div>"}else if(m){_gel("stct1").style.color=j;_gel("stct1").innerHTML=a+c+b;_gel("stct2").style.color=k;_gel("stct2").innerHTML=a+d+b;_gel("stct3").innerHTML=a+e+b}}print("fnUpdateProfit ended")}function fnUpdateSummary(a){if(bAllReady){var b='<img width="192" height="96" src="http://ichart.finance.yahoo.com/z?s='+_esc(arrStocks[a][1])+"&amp;t="+pref.getString("ChartScope")+'&amp;l=off&amp;z=b">';if(_gel("StockSummary").style.display=="block"){_gel("SummaryChartTD").innerHTML=b;_gel("SummaryNameTD").innerHTML=arrStocks[a][2];_gel("SummaryDayRangeTD").innerHTML=arrStocks[a][20];_gel("Summary52wkRangeTD").innerHTML=arrStocks[a][14];_gel("Summary200AvgTD").innerHTML=arrStocks[a][19];_gel("SummaryDayVolumeTD").innerHTML=arrStocks[a][12];_gel("SummaryLastTradeTime").innerHTML=arrStocks[a][7]+" "+arrStocks[a][8]}else _gel("StockChart").innerHTML=b}}function fnUpdateStockTable(){var c="stc",h="NameColumn";print("fnUpdateStockTable started");var b,d;if(bAllReady)for(var a=0;a<arrStocks.length;a++){b=arrStocks[a][2];if(b==""||pref.getInt(h)==1)b=arrStocks[a][1];else if(pref.getInt(h)==40)b=arrStocks[a][2]+" ("+arrStocks[a][1]+")";else if(!isNaN(arrStocks[a][21]))b=b.substr(0,b.indexOf(" "))+" "+arrStocks[a][23].slice(4)+" "+myRound(arrStocks[a][21])+" "+arrStocks[a][22];_gel(c+a+"1").innerHTML='<a Title="'+trim(arrStocks[a][25])+'" id="stcn'+a+'" onmouseover="fnTPChart(1);fnUpdateSummary('+a+');" onmouseout="fnTPChart(0)" target="_new" href="http://finance.yahoo.com/q?s='+_esc(arrStocks[a][1])+'">'+b+"</a>";if(a%2==0)d="#FFFFFF";else d="#EFEFEF";if(pref.getInt("Flashing")==1&&_gel(c+a+"2").innerHTML!=""){_gel(c+a+"2").style.background=fnNumToColor(parseFloat(arrStocks[a][3])-parseFloat(_gel("stcc"+a+"2").innerHTML),d);setTimeout('_gel("stc'+a+'2").style.background="'+d+'"',700)}var f="";if(arrStocks[a][6].replace("%","")*1>arrStockHi[a]*1&&arrStockHi[a]*1>0){f="HiAlert";b=arrStockHi[a]}else if(arrStocks[a][6].replace("%","")*1<arrStockLo[a]*1&&arrStockLo[a]*1>0){f="LoAlert";b=arrStockLo[a]}_gel(c+a+"0").className=f;_gel(c+a+"0").title="Hi="+arrStockHi[a]+"\nLo="+arrStockLo[a];_gel(c+a+"2").innerHTML='<a target="_new" href=http://finance.yahoo.com/charts?s='+_esc(arrStocks[a][1])+"#chart1:symbol="+_esc(arrStocks[a][1])+';range=3m;indicator=volume;charttype=line;crosshair=on;logscale=on;source=><font id="stcc'+a+'2" color="'+fnNumToColor(arrStocks[a][3],"#000000")+'">'+arrStocks[a][pref.getString("ChangeColumn")]+"</font></a>";for(var g=3,e=1;e<iConfCols+1;e++)if(pref.getString("Column"+e)!="0"){_gel(c+a+g).innerHTML='<div id="stcc'+a+g+'">'+arrStocks[a][pref.getString("Column"+e)]+"</div>";g++}}print("fnUpdateStockTable ended")}function fnUpdateSummary(a){if(bAllReady){var b='<img width="192" height="96" src="http://ichart.finance.yahoo.com/z?s='+_esc(arrStocks[a][1])+"&amp;t="+pref.getString("ChartScope")+'&amp;l=off&amp;z=b">';if(_gel("StockSummary").style.display=="block"){_gel("SummaryChartTD").innerHTML=b;_gel("SummaryNameTD").innerHTML=arrStocks[a][2];_gel("SummaryDayRangeTD").innerHTML=arrStocks[a][20];_gel("Summary52wkRangeTD").innerHTML=arrStocks[a][14];_gel("Summary200AvgTD").innerHTML=arrStocks[a][19];_gel("SummaryDayVolumeTD").innerHTML=arrStocks[a][12];_gel("SummaryLastTradeTime").innerHTML=arrStocks[a][7]+" "+arrStocks[a][8]}else _gel("StockChart").innerHTML=b}}function fnInsertSummary(){var a="StockSummary",b='<hr class="HrDef"><table width="100%" border=0 cellspacing=0 cellpadding=0><tr><td id="SummaryChartTD" style="width:1%;height:98px"></td><td><table style="font-size:'+fsize+'" width="100%" border=0 cellspacing=0 cellpadding=0><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_name__</b></td><td style="width:10px"></td><td id="SummaryNameTD" nowrap></td></tr><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_dayrange__</b></td><td style="width:10px"></td><td id="SummaryDayRangeTD" nowrap></td></tr><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_52weekrange__</b></td><td style="width:10px"></td><td id="Summary52wkRangeTD" nowrap></td></tr><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_200daymovingavg__</b></td><td style="width:10px"></td><td id="Summary200AvgTD" nowrap></td></tr><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_dayvolume__</b></td><td style="width:10px"></td><td id="SummaryDayVolumeTD" nowrap></td></tr><tr><td style="width:5px"></td><td nowrap style="width:1%"><b>__MSG_lasttradetime__</b></td><td style="width:10px"></td><td id="SummaryLastTradeTime" nowrap></td></tr></table></td></tr></table>';_gel(a).innerHTML=b;_gel(a).style.display="block";fnUpdateSummary(0)}function fnInsertProfitSummaryTable(){var a='<hr class="HrDef"><table width="100%" border=0 cellspacing=0 cellpadding=0 style="font-size:'+fsize+'">';a+='<tr width=100%><td nowrap>__MSG_dayearned__: </td><td id="stct1" nowrap></td><td width="10px" nowrap></td><td nowrap>__MSG_earned__: </td><td id="stct2" nowrap></td><td width="10px" nowrap></td><td nowrap>__MSG_value__: </td><td id="stct3" nowrap></td><td nowrap width="70%"></td></tr></table>';_gel("StockProfitSummary").innerHTML=a}function fnInsertAdd(){var k='" width="10" height="10" style="cursor:hand;cursor:pointer;" onclick="fnMoveStock(',c='" class="cellR">',b='" title="__MSG_edittooltip__" onclick="fnEditStock(this)" onmouseover=this.style.backgroundColor="#dcdcdc" onmouseout=this.style.backgroundColor="',j="></td></tr>",h="Currency",l='<Col width="16%"><Col width="16%"><Col width="16%"><Col width="16%"><Col width="16%"><Col width="16%">',f=9,m="",n="",e=pref.getString(h)!="-",a;if(e){f=10;l='<Col width="14%"><Col width="14%"><Col width="14%"><Col width="14%"><Col width="14%"><Col width="14%"><Col width="14%">';m='<td class="cellR">__MSG_currencyrate__</td>'}var o='<hr class="HrDef"><table border=0 id="tblSearch" cellspacing=0 cellpadding=0 style="font-size:'+fsize+'"><tr><td width="62px" align="left"><input type="text" style="font-size:'+fsize+';width:180px;color:#AAAAAA;" bclass="def" id="txtStockSymbol" name="txtStockSymbol" alt="Symbol" title="__MSG_symbolsearchtip__" value="__MSG_symbolsearchtip__" onFocus=txtFocus(this,1) onBlur=txtFocus(this,0) onKeyUp=fnSymbolSearch(this.value,"S")></td><td width="20px" align="left"><img width="12" height="12" style="cursor:hand;cursor:pointer;" onclick="var Temp=_gel(\'txtStockSymbol\').value;fnAddStock(Temp);" title="__MSG_addstock__" src="http://stockportfoliogg.googlecode.com/svn/released/images/AddStock.gif"></td></tr></table><div id="StockAddList" style="font-size:'+fsize+'" class="SearchList"></div>',g='<tr style="height:1px;background-Color:BCBCBC"><td colspan='+f+j,d='<table style="width:100%;font-size:'+fsize+'" border=0 cellspacing=0 cellpadding=0>'+l+'<Col width="10px"><Col width="10px"><Col width="10px"><tr style="height:3px"><td colspan='+f+j+g+'<tr style="font-weight: bold;"><td class="cellL">__MSG_symbol__</td><td class="cellR" >__MSG_numberofstocks__</td><td class="cellR">__MSG_buyprice__</td><td class="cellR">__MSG_tradecost__</td>'+m+'<td class="cellR">__MSG_hialert__</td><td class="cellR">__MSG_loalert__</td><td colspan=3></td></tr>'+g;for(i=0;i<arrStockSymbols.length;i++){if(i%2==0)a="#FFFFFF";else a="#EFEFEF";if(e)n='<td id="ctc4'+i+b+a+c+arrStockCurrRates[i]+"</td>";d+='<tr style="background-Color:'+a+';"><td id="ctc0'+i+'" class="cellL" title="__MSG_edittooltip__" onclick="fnEditStock(this)" onmouseover=this.style.backgroundColor="#dcdcdc" onmouseout=this.style.backgroundColor="'+a+'">'+arrStockSymbols[i]+'</td><td id="ctc1'+i+b+a+c+arrStockQtys[i]+'</td><td id="ctc2'+i+b+a+c+arrStockPrices[i]+'</td><td id="ctc3'+i+b+a+c+arrStockTC[i]+"</td>"+n+'<td id="ctc5'+i+b+a+c+arrStockHi[i]+'</td><td id="ctc6'+i+b+a+c+arrStockLo[i]+'</td><td class="cellR" width="25px"><img class="cellR" id="ctc7'+i+'" width="10" height="10" style="cursor:hand;cursor:pointer;" onclick="fnDeleteStock('+i+')" src="http://stockportfoliogg.googlecode.com/svn/released/images/delete.gif" title="__MSG_deletestock__"></td><td class="cellR" width="15px"><img id="ctc8'+i+k+i+',0)" src="http://stockportfoliogg.googlecode.com/svn/released/images/MoveUp.gif" title="__MSG_moveup__"></td><td class="cellR" width="15px"><img id="ctc9'+i+k+i+',1)" src="http://stockportfoliogg.googlecode.com/svn/released/images/MoveDown.gif" title="__MSG_movedown__"></td></tr>'}if(e)d+="<tr>"+g+'<td colspan=10 title="__MSG_currencytip__">__MSG_selectedcurrency__: '+pref.getString(h)+"</td></tr>";d+="</table>";_gel("StockAdd").innerHTML=o+d;if(i>0){_gel("ctc80").style.display="none";_gel("ctc9"+(i-1)).style.display="none"}}function fnInsertTables(){bTablesReady=false;bAllReady=false;fnInsertFooter();fnInsertStockTable();fnToggleSummary(0);fnToggleProfit(true);fnToggleNews(0);(trim(arrStockSymbols.join(","))=="GOOG,^DJI,EURUSD=X,XAU=X"&&arrStockSymbols.length==4||_gel("StockAdd").style.display=="block")&&fnToggleAdd(1);_IG_SetTitle(pref.getString("CustomTitle"));bTablesReady=true;fnUpdateValues()}function fnToggleProfit(c){var f="StockProfitDetails",b="none",e="block",d="StockProfitSummary",a="ShowProfit",g=c&&pref.getString(a)=="Details"||!c&&_gel(d).style.display==e,h=c&&pref.getString(a)=="Summary"||!c&&_gel(d).style.display==b&&_gel(f).style.display==b;if(h){fnInsertProfitSummaryTable();pref.set(a,"Summary")}else if(g){fnInsertProfitDetailsTable();pref.set(a,"Details")}else pref.set(a,b);_gel(f).style.display=g?e:b;_gel(d).style.display=h?e:b;fnUpdateProfit();_IG_AdjustIFrameHeight()}function fnToggleSummary(c){var a="ChartType",b="StockSummary";if(c)if(_gel(b).style.display=="none"){pref.set(a,"Summary");fnInsertSummary()}else{_gel(b).style.display="none";pref.set(a,"ToolTip")}else pref.getString(a)=="Summary"&&fnInsertSummary();_IG_AdjustIFrameHeight()}function fnToggleAdd(b){var a="StockAdd";if(_gel(a).style.display=="none"&&bTablesReady==true||b==1){_gel(a).style.display="block";fnInsertAdd()}else _gel(a).style.display="none";_IG_AdjustIFrameHeight()}function fnInsertFooter(){var a="http://stockportfoliogg.googlecode.com/svn/released/images/";_gel("Footer").innerHTML='<table border="0" cellspacing="0" celpadding="1px" width="100%"><tr><td colspan="7" style="height:2px"></td></tr><tr class="Footer"><td id="FooterMsg" nowrap>__MSG_stockloading__</td><td width="18px"><img id="AddEditIcon" width="16" height="16" style="border:none;cursor:hand;cursor:pointer;" onclick="fnToggleAdd(0)" src="http://stockportfoliogg.googlecode.com/svn/released/images/AddEdit.gif" title="__MSG_showaddedit__"></td><td style="width:18px;"><img width="16" height="16" style="border:none;cursor:hand;cursor:pointer" onclick="fnToggleSummary(1)" src="http://stockportfoliogg.googlecode.com/svn/released/images/Summary.gif" title="__MSG_showsummary__"></td><td style="width:18px;"><img width="16" height="16" style="border:none;cursor:hand;cursor:pointer;" onclick="fnToggleProfit(false)" src="http://stockportfoliogg.googlecode.com/svn/released/images/money.gif" title="__MSG_showprofit__"></td><td style="width:18px;"><img width="16" height="16" style="border:none;cursor:hand;cursor:pointer;" onclick="fnToggleNews(1);" src="'+_IG_GetImageUrl(a+"News.gif")+'"  title="__MSG_shownews__"/></td><td style="width:18px;"><a href="http://cnybroe.googlepages.com/help" target="_blank"><img width="16" height="16" style="border:none;cursor:hand;cursor:pointer;" src="http://stockportfoliogg.googlecode.com/svn/released/images/help.gif" title="__MSG_help__"></a></td><td style="width:18px;"><a href="http://groups.google.com/group/stock-portfolio" target="_blank"><img width="16" height="16" style="border:none;cursor:hand;cursor:pointer;" src="http://stockportfoliogg.googlecode.com/svn/released/images/ggroups.gif" title="__MSG_gotoggroups__"></a></td></tr></table>'}function fnInsertStockTable(){var b,a='<table border=0 cellspacing=0 width="100%" style="font-size:'+fsize+';" class="def">',d=",,,%,__MSG_change__,__MSG_change__(%),__MSG_lasttrade__,__MSG_lasttradedate__,__MSG_lasttradetime__,__MSG_dayopen__,__MSG_daylow__,__MSG_dayhigh__,__MSG_dayvolume__,__MSG_previousclose__,__MSG_52weekrange__,__MSG_ask__,__MSG_bid__,__MSG_tickertrend__,__MSG_50daymovingavg__,__MSG_200daymovingavg__,__MSG_dayrange__,__MSG_optionstrike__,__MSG_optioncallput__,__MSG_optionexpire__,__MSG_currency__,,__MSG_currencyrate__,,,,__MSG_dayearned__,__MSG_earned__".split(","),c="";iConfCols=0;for(i=1;i<iStockCols+1;i++)if(pref.getString("Column"+i)!="0"){iConfCols++;c+='<td class="cellR">'+d[pref.getString("Column"+i)]+"</td>"}a+='<COLGROUP width="8px"><COLGROUP span="2" width="10%"><COLGROUP span="'+iConfCols+'" width="'+80/iConfCols+'%"><tr style="font-weight: bold;"><td style="padding-right:8px" title="Alerts"></td><td class="cellL">__MSG_name__</td><td class="cellR"><div class="Chart" id="StockChart"></div>__MSG_change__</td>';a+=c;a+='</tr><tr style="height:1px;background-Color:BCBCBC"><td colspan='+Number(iConfCols+3)+"></td></tr>";for(i=0;i<arrStockSymbols.length;i++){if(i%2==0)b="#FFFFFF";else b="#EFEFEF";a+='<tr id="str'+i+'" style="background-Color:'+b+';"><td class="cellL" id="stc'+i+'0"></td><td class="cellL" id="stc'+i+'1">'+arrStockSymbols[i]+"</td>";for(j=2;j<iConfCols+3;j++)a+='<td class="cellR" id="stc'+i+j+'"></td>';a+="</tr>"}a+="</table>";_gel("StockData").innerHTML=a}function fnInsertProfitDetailsTable(){var a="";if(pref.getString("Currency")=="-")a='style="visibility:hidden;"';var c='<tr style="height:1px;background-Color:BCBCBC"><td colspan=6></td></tr>',b='<hr class="HrDef"><table width="100%" border=0 cellspacing=0 cellpadding=0 style="width:100%;font-size:'+fsize+'" class="def"><col width="10%"><col width="20%"><col width="25%"><col width="15%"><col width="15%"><col width="15%"><tr style="font-weight:bold;"><td class="cellL">__MSG_name__</td><td class="cellR">__MSG_dayearned__</td><td class="cellR">__MSG_earned__</td><td class="cellR">__MSG_value__</td><td class="cellC" '+a+'>__MSG_currency__</td><td class="cellL" '+a+">__MSG_currencyrate__</td></tr>"+c;for(i=0;i<arrStockSymbols.length+1;i++){if(i==arrStockSymbols.length)b+=c;b+='<tr><td id="ptc0'+i+'" class="cellL"></td><td id="ptc1'+i+'" class="cellR"></td><td id="ptc2'+i+'" class="cellR"></td><td id="ptc3'+i+'" class="cellR"></td><td id="ptc4'+i+'" class="cellC" '+a+'></td><td id="ptc5'+i+'" class="cellR" '+a+"></td></tr>"}b+="</table>";_gel("StockProfitDetails").innerHTML=b}function fnToggleNews(c){var b="ShowNews",a="StockNews";if(c)if(_gel(a).style.display=="none"){_gel(a).innerHTML='<hr class="HrDef"><div class="loading">__MSG_loading__</div>';var d="http://finance.yahoo.com/rss/headline?s="+_esc(arrStockSymbols.join(","));_IG_FetchFeedAsJSON(d,fnInsertNews,5,false);_gel(a).style.display="block";pref.set(b,"1")}else{_gel(a).style.display="none";pref.set(b,"0")}else pref.getString(b)=="1"&&fnToggleNews(1);_IG_AdjustIFrameHeight()}function fnInsertNews(a){var b="";for(var c in a.Entry){b+='<tr><td width="5" valign="top"><img width="16" height="16" src="http://stockportfoliogg.googlecode.com/svn/released/images/Square.gif"></td><td><span><a href="'+_hesc(a.Entry[c].Link)+'" target="_blank">';b+=_hesc(a.Entry[c].Title)+"</a></span></td></tr>"}_gel("StockNews").innerHTML='<hr class="HrDef"><table border="0" cellspacing="0" cellpadding="0" width="100%" style="font-size:'+fsize+'">'+b+"</table>";_IG_AdjustIFrameHeight()}function fnSymbolSearch(b){var a="StockAddList";if(trim(b)!=""){_gel(a).innerHTML="__MSG_loading__";_IG_FetchContent("http://d.yimg.com/autoc.finance.yahoo.com/autoc?query="+_esc(b)+"&callback=YAHOO.Finance.SymbolSuggest.ssCallback",fnSymbolSearchResponse,{refreshInterval:3599})}else _gel(a).style.display="none";_IG_AdjustIFrameHeight()}function fnSymbolSearchResponse(f){var j="StockAddList",h="<td nowrap>",g="</td>",a=0,d=0,c="",b=0,i="",k='<tr style="height:1px;background-Color:BCBCBC"><td colspan=4></td></tr>',e='<table width="100%" border=0 cellspacing=0 cellpadding=0 style="font-size:'+fsize+'" class="def">'+k+'<tr style="font-weight:bold;"><td>Symbol</td><td>Name</td><td>Type</td><td>Exchange</td></tr>'+k;if(f.indexOf('"Result":[]',1)<1){a=f.indexOf("[{",1)+2;d=f.indexOf("}]",a);c=f.substring(a,d).split("},{");for(b=0;b<c.length;b++){a=c[b].indexOf('"symbol":"',0)+10;d=c[b].indexOf('","',a);sSymbol=c[b].substring(a,d);e+='<tr style="cursor: pointer;" onmouseover=\'this.style.backgroundColor="#DCDCDC";\' onmouseout=\'this.style.backgroundColor="#FFFFFF";\' onclick=\'_gel("txtStockSymbol").value="'+sSymbol+"\"'><td nowrap>"+sSymbol+g;a=c[b].indexOf('"name": "',1)+9;d=c[b].indexOf('","',a);e+=h+c[b].substring(a,d)+g;a=c[b].indexOf('"typeDisp":"',1)+12;if(a>12){d=c[b].indexOf('"',a);i=c[b].substring(a,d)}else i="Stock";e+=h+i+g;a=c[b].indexOf('"exchDisp":"',1)+12;if(a>12)d=c[b].indexOf('"',a);else{a=c[b].indexOf('"exch": "',1)+8;d=c[b].indexOf('"',a)}e+=h+c[b].substring(a,d)+"</td></tr>"}e+='<tr><td colspan=4 class="Footer"><i>__MSG_searchlimit__</i></td></tr></table>'}else e+="<tr><td colspan=4>__MSG_notfound__</td></tr></table>";_gel(j).innerHTML=e;_gel(j).style.display="block";_IG_AdjustIFrameHeight()}function fnEditStock(a){if(a.innerHTML.toLowerCase().indexOf("input",1)>0)return;var c=a.innerHTML,b="uha"+a.id.replace("ctc",""),d=a.id.substr(3,1)==0?"64px":"49px",e=a.id.substr(3,1)==0?"left":"right",f='<input type="text" id="'+b+'" onkeypress="EditOnKey(event,this);" onBlur="EditOnBlur(this);" value="'+c+'" class="def" style="font-size:'+fsize+";width:"+d+";height:18px;margin:0px;text-align:"+e+';" />';a.innerHTML=f;_gel(b).focus()}function EditOnBlur(a){var c=a.id.substr(4),b=a.id.substr(3,1);if(b==0&&trim(a.value)!=""||b>0&&!isNaN(a.value)){if(b==0)arrStockSymbols[c]=a.value;if(b==1)arrStockQtys[c]=a.value;if(b==2)arrStockPrices[c]=a.value;if(b==3)arrStockTC[c]=a.value;if(b==4)arrStockCurrRates[c]=a.value;if(b==5)arrStockHi[c]=a.value;if(b==6)arrStockLo[c]=a.value;fnSavePrefs()}fnLoad()}function EditOnKey(a,b){a.keyCode==13&&EditOnBlur(b)}function fnTPChart(b){var a="StockChart";if(pref.getString("ChartType")=="ToolTip"&&b==1)_gel(a).style.display="block";else _gel(a).style.display="none"}function fnDeleteStock(a){arrStockSymbols.splice(a,1);arrStockQtys.splice(a,1);arrStockPrices.splice(a,1);arrStockTC.splice(a,1);arrStockCurrRates.splice(a,1);arrStockHi.splice(a,1);arrStockLo.splice(a,1);fnSavePrefs();fnLoad()}function fnMoveStock(c,d){var a,b;if(d==1){if(c>arrStockSymbols.length-2)return;a=c;b=c+1}else{if(c==0)return;a=c-1;b=c}arrStockSymbols.splice(a,2,arrStockSymbols[b],arrStockSymbols[a]);arrStockQtys.splice(a,2,arrStockQtys[b],arrStockQtys[a]);arrStockPrices.splice(a,2,arrStockPrices[b],arrStockPrices[a]);arrStockTC.splice(a,2,arrStockTC[b],arrStockTC[a]);arrStockCurrRates.splice(a,2,arrStockCurrRates[b],arrStockCurrRates[a]);arrStockHi.splice(a,2,arrStockHi[b],arrStockHi[a]);arrStockLo.splice(a,2,arrStockLo[b],arrStockLo[a]);fnSavePrefs();fnLoad()}function fnAddStock(a){var b=a.replace(/ /g,"");if(b.length>0&&a!="__MSG_symbolsearchtip__"){arrStockSymbols.push(b);arrStockQtys.push(0);arrStockPrices.push(0);arrStockTC.push(0);arrStockCurrRates.push("???");arrStockHi.push(0);arrStockLo.push(0);fnSavePrefs();fnLoad()}}function fnSavePrefs(){var a=",";print("fnSavePrefs. Number of stocks:"+arrStockSymbols.length);if(arrStockSymbols.length<iMaxStockNo+1){pref.set("StockSymbols",arrStockSymbols.join(a),"StockQtys",arrStockQtys.join(a),"StockHi",arrStockHi.join(a),"StockLo",arrStockLo.join(a),"StockPrices",arrStockPrices.join(a),"StockTC",arrStockTC.join(a),"StockCurrRates",arrStockCurrRates.join(a));print("fnSavePrefs. Stocks saved")}}function fnPrefsValidation(c){var b=",";if(trim(c.join(b))==""){arrStockSymbols="^GSPC,RUWUT.X,EURUSD=X,XAU=X".split(b);arrStockQtys="100,0,200,300".split(b);arrStockPrices="235,0,0,0".split(b);arrStockTC="5,3,4,2".split(b);arrStockCurrRates="1,1,1,1".split(b);arrStockHi="500,10000,2,0.002".split(b);arrStockLo="300,6000,1,0.0005".split(b)}for(var a=0;a<c.length;a++){if(isNaN(arrStockQtys[a]))arrStockQtys[a]=0;if(isNaN(arrStockPrices[a]))arrStockPrices[a]=0;if(isNaN(arrStockTC[a]))arrStockTC[a]=0;if(isNaN(arrStockHi[a]))arrStockHi[a]=0;if(isNaN(arrStockLo[a]))arrStockLo[a]=0}if(arrStockSymbols.length>iMaxStockNo){var e=new _IG_MiniMessage(__MODULE_ID__),f='<a target="_new" href="http://cnybroe.googlepages.com/iGoogleLimit">More than '+iMaxStockNo+" stocks has been configured. Please read more here.<a>",d=e.createStaticMessage(f);d.style.backgroundColor="red"}}function fnMessage(){var a=new _IG_MiniMessage(__MODULE_ID__),b='<a target="_new" href="http://www.google.dk/ig/directory?url=stockportfoliogg.googlecode.com/svn/released/portfolio.xml">Please write a comment and rate the gadget if you find it useful.<a>';a.createTimerMessage(b,8)}function fnHideMess(a){print("fnHideMess started");return function(){_IG_AdjustIFrameHeight();iPrefVersion=a;pref.set("GadgetVersion",iPrefVersion);print("fnHideMess ended")}}function fngetDate(e){var a=new Date,d=fnZeroPad(a.getMonth()+1,2),g=fnZeroPad(a.getDate(),2),f=a.getFullYear(),c=fnZeroPad(a.getHours(),2),b=fnZeroPad(a.getMinutes(),2);if(e)b+=":"+fnZeroPad(a.getSeconds(),2);return f+"-"+d+"-"+g+" "+c+":"+b}function fnZeroPad(c,b){var a=c+"";while(a.length<b)a="0"+a;return a}function trim(a){if(a)return a.replace(/^\s*/,"").replace(/\s*$/,"");else return ""}function fnReadPrefs(){var a=",";arrStockSymbols=pref.getString("StockSymbols").split(a);arrStockQtys=pref.getString("StockQtys").split(a);arrStockPrices=pref.getString("StockPrices").split(a);arrStockTC=pref.getString("StockTC").split(a);arrStockCurrRates=pref.getString("StockCurrRates").split(a);arrStockHi=pref.getString("StockHi").split(a);arrStockLo=pref.getString("StockLo").split(a);iPrefVersion=pref.getString("GadgetVersion")}function myRound(a){var c=a.toString(),b=c.indexOf(".");if(c.length>6&&b>-1&&!isNaN(a)){if(b<6)b=6;a=c.substr(0,b)*1}return a}function fnNumToColor(a,c){var b=c;if(!isNaN(parseFloat(a))){if(parseFloat(a)>0)b="#008200";if(parseFloat(a)<0)b="#FF2200"}return b}function txtFocus(a,b){if(trim(a.value)==""||trim(a.value)==a.title)if(b==1){a.value="";a.style.color="#000000"}else{a.style.color="#AAAAAA";a.value=a.title}}function splitLine(c){var a=[];a=c.split(/,(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/"/g,"");if(a.length!=26)a='N/A,Bad data,Bad data,0.00%,0.00,0.00 - 0.00%,0.00,01/01/1899,12:00am,0.00,0.00,0.00,100000,0.00,"0.00 - 0.00",0.00,0.00," ====== ",+0.00%,0.00%,"0.00 - 0.00","N/A","N/A","N/A","EUR","No exchange"'.split(",");if(a[0]!="N/A"){a[24]="???";a[25]=a[0].substr(0,a[0].indexOf("<"))}return a}function print(c){var a="debug";if(debug){var b=_gel(a).innerHTML;if(_gel(a).style.display=="none"){_gel(a).style.display="block";_IG_AdjustIFrameHeight()}c=fngetDate(1)+"; "+_hesc(c.toString())+"<br>";b=c+b;_gel(a).innerHTML=b}}fnInit() 
   </script>
  ]]>
  </Content>
</Module>