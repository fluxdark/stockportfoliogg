<?xml version="1.0" encoding="UTF-8" ?>
  <Module>
  <ModulePrefs title="Get Google stock data from xml" scrolling="true"/>

  <Content type="html">
  <![CDATA[
    <div id="content_div"></div>
    <script type="text/javascript">

      //search: http://www.google.com/finance/match?matchtype=matchall&q=maersk
      //News: http://www.google.com/finance/company_news?q=NASDAQ:GOOG&output=rss
      //http://www.google.com/finance/match?matchtype=matchall&q=abb

      function makeDOMRequest() {    
        var params = {};  
        params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.DOM;  
        var url = "http://www.google.com/ig/api?stock=AAPL&stock=GOOG&stock=ABB";  
        gadgets.io.makeRequest(url, response, params);
      }

      function response(obj) { 
        var domdata = obj.data;
        var itemList = domdata.getElementsByTagName("finance");

        // Loop through all <finance> nodes
        for (var i = 0; i < itemList.length ; i++) 
        { 
          // For each <finance> node, get child nodes.
          var nodeList = itemList.item(i).childNodes;
          // Loop through child nodes. Extract data from the text nodes 
          for (var j = 0; j < nodeList.length ; j++) {
            var node = nodeList.item(j);
            //alert("Name:" + node.nodeName);
            if (node.nodeName == "company") 
            {
              var price = node.getAttribute("data");
              alert("Company:" + price);
            }
          } 
        } 
      }
    gadgets.util.registerOnLoadHandler(makeDOMRequest);      
    </script>
    ]]>
    </Content>
  </Module>